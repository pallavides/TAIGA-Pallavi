/*
 * interrupt_controller.c
 *
 *  Created on: Mar 20, 2015
 *      Author: teja
 */

#include "interrupt_controller.h"
#include "xintc.h"
#include "fifo_queue.h"

static XIntc interrupt_controller;

int init_interrupt_system();


int init_interrupt_system(){
	int Status;

	// Initialize the interrupt controller driver so that it is ready to use.
	Status = XIntc_Initialize(&interrupt_controller, INTC_DEVICE_ID);
	if (Status != XST_SUCCESS) {
		return XST_FAILURE;
	}

	return XST_SUCCESS;
}

int connect_interrupt_handler(){
// Connect a device driver handler that will be called when an interrupt occurs
Status = XIntc_Connect(&interrupt_controller, FIFO_INTR_ID, (XInterruptHandler)FifoHandler, (void *)&fifo_dequeue);
if (Status != XST_SUCCESS) {
	return XST_FAILURE;
}

}
